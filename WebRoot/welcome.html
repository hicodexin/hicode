<!DOCTYPE html>
<html>
<head>
<title>welcome.html</title>

<meta name="keywords" content="keyword1,keyword2,keyword3">
<meta name="description" content="this is my page">
<meta name="content-type" content="text/html; charset=UTF-8">

<link rel="stylesheet" type="text/css" href="/hicode/syscss/bootstrap.css">
<link rel="stylesheet" href="/hicode/syscss/materialize.css">
<script type="text/javascript" src="/hicode/sysjs/jquery.min.js"></script>
<script type="text/javascript" src="/hicode/sysjs/bootstrap.js"></script>
<script src="/hicode/sysjs/materialize.min.js"></script>
<style type="text/css">
	* {
		margin: 0px;
		padding: 0px;
	}
	.dv_top{
		background-color: #000;
		height: 130px;
	}
	.dv_title{
		margin: auto;
		/* background-color:green; */
		width:700px;
		color: #C0C0C0;
		text-align: center;
		font-size:60px; 
		line-height: 130px;
	}
	.dv_login{
		width:100%;
		height:800px;
		background-image: url("/hicode/sysimg/login/backimg.jpg"); 
		background-size: 100% 100%;
	}
	
	.dv_login_left {
		width: 52%;
		/*height: 600px;*/
		float: left;
		margin-left: 8%;
		margin-top: 100px;
		background-color: #996633;
		border-radius: 9px;
	}
	
	.dv_login_right {
		width: 430px;
		height: 610px;
		float: right;
		margin-right: 10%;
		margin-top: 100px;
		background-color: #333;
	}

	#dvrow_img>img{
		width: 76px;
		height: 76px;
		float: left;
		margin-left:5.5% ;
		border: 1px #333 solid;
		display: 
	}
	
	#dvrow_img>img:HOVER {
		cursor: pointer;
		border: 1px red solid;
	}
	#next_btn{
		color: #fff; 
		float:right; 
		text-align: center;
	}
	
	#next_btn:HOVER {
		cursor: pointer;
		color: #A23526;
	}
	@media ( max-width: 1430px) {
		.dv_login_left {
			margin-left: 3%;
			margin-top: 200px;
		}
		.dv_login_right {
			margin-right: 3%;
		}
	}
	
	@media ( max-width: 1090px) {
		#dvrow_img>img{
			margin: auto 10% 20px;
			width: 150px;
			height: 150px;
		}
		.dv_login_left {
			width: 100%;
			padding-top: 0;
			margin: 0;
		}
		.dv_login_right {
			width: 100%;
			padding-top: 0;
			margin: 0px;
		}
	}
	@media ( max-width: 540px) {
		#dvrow_img>img{
			margin: auto;
			width: 100px;
			height: 100px;
		}
		
	}
</style>
</head>

<body bgColor="#ff6666">
	<div class="dv_top">
		<div class="dv_title">HICODE管理后台</div>
	</div>
	
	<div class="dv_login">
		<div class="dv_login_left">
			<div class="carousel slide  bagtop1" id="myCarousel">
				<ul class="carousel-indicators">
					<li data-target="#myCarousel" data-slide-to="0" class="active"></li>
					<li data-target="#myCarousel" data-slide-to="1"></li>
					<li data-target="#myCarousel" data-slide-to="2"></li>
					<li data-target="#myCarousel" data-slide-to="3"></li>
					<li data-target="#myCarousel" data-slide-to="4"></li>
	
				</ul>
				<div class="carousel-inner">
	
					<div class="item active">
						<img src="/hicode/sysimg/login/c01.jpg">
					</div>
					<div class="item">
						<img src="/hicode/sysimg/login/c02.jpg">
					</div>
					<div class="item">
						<img src="/hicode/sysimg/login/c03.jpg">
					</div>
					<div class="item">
						<img src="/hicode/sysimg/login/c04.jpg">
					</div>
					<div class="item">
						<img src="/hicode/sysimg/login/c05.jpg">
					</div>
	
				</div>
				<a class="left carousel-control" href="#myCarousel" data-slide="prev"></a>
				<a class="right carousel-control" href="#myCarousel" data-slide="next"></a>
			</div>
		</div>
		<div class="dv_login_right">
			<div id="login-page" class="row">
				<div class="col s12 z-depth-6 card-panel" style="background-color: #333;">
						<div class="row">
							<div class="input-field col s12 center">
								<img src="/hicode/sysimg/login/biao.jpg" class="responsive-img valign profile-image-login">
								<p></p>
								<p class="center login-form-text">
									<font color="#b0b0b0">创意无限，时间有限，立即行动</font>
								</p>
	
							</div>
						</div>
						<div class="row margin">
							<div class="input-field col s12">
								<i class="mdi-social-person-outline prefix"></i>
								<input style="color:#fff" class="validate" id="email" type="text">
								<label id="sp1" for="email" class="center-align">
									Email/用户名
								</label>
							</div>
						</div>
						<div class="row margin">
							<div class="input-field col s12">
								<i class="mdi-action-lock-outline prefix"></i>
								<input id="password" type="password"  style="color:#fff" >
								<label for="password">Password</label>
							</div>
						</div>
						<div class="row">
							<div id="" style="color: #fff; float:left;"class="input-field col s9">请点击图片旋转至正向朝上</div>
							<div id="next_btn" class="input-field col s3">换一组</div>
						</div>
						<div class="row" id="dvrow_img">
							
						</div>
						<div class="row">
							<div id="hehe" >&nbsp;&nbsp;&nbsp;&nbsp;</div>
						</div>
						<div class="row">
							<div class="input-field col s12">
								<button id="bt_sub" class="btn waves-effect waves-light col s12">登　录</button>
							</div>
						</div>
						<div class="row">
							<br />
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</body>
<script type="text/javascript">
	$().ready(function(){
		
		getCode();
		
		//下一组验证码
		$("#next_btn").click(function(){
			if($(this).html() == "请稍后"){
				return;
			}
			getCode();
			$(this).html("请稍后");
			window.setTimeout(function() {
				$("#next_btn").html("换一组");
			}, 3000);
			
		});
		
		$("#bt_sub").click(function(){
			
			$("#sp1").html("Email/用户名");
			$("#sp1").css("color","#9e9e9e");
			$("#email").css("borderColor","#9e9e9e");
			
			if($("#email").val() == "" || $("#email").val()==null){
				$("#sp1").html("用户名不能为空");
				$("#sp1").css("color","red");
				$("#email").css("borderColor","red");
				getCode();
				return;
			}
			if ($("#email").val().indexOf(" ") != -1) {
				$("#sp1").html("用户名不能含有空格");
				$("#sp1").css("color","red");
				$("#email").css("borderColor","red");
				getCode();
				return;
			}
			var img_arry = new Array();
			img_arry = $("#dvrow_img>img");
			
			var data_img = [];
			for(var i=0;i<img_arry.length;i++){
				data_img.push($(img_arry[i]).attr("deg"));
			}
			
			$.post("/hicode/validateCode/checkCodeDeg.spc",{"data_img":data_img},function(a){
				if(a){
					if(a.call_back == "no"){
						getCode();
						$("#hehe").html("验证码有误。。。。");
						$("#hehe").css("color","red");
						return;
					}
				}
				
			},"json");
			getCode();
			if($("#hehe").html().trim().length>0 ){
				return;
			}
			
			//查询用户名密码是否存在
			var data = {"ufname" : $("#email").val(),
						"ufpass" : $("#password").val()};
			$.post("/hicode/UserInfo/getUserAndPass.spc",data,function(a) {
				$("#sp1").html();
				if(a){
					console.log(a);
					if(a.call_back != "ok"){
						console.log(a.call_back);
						console.log("--------------------");
						$("#sp1").html(a.call_back);
						$("#sp1").css("color","red");
						$("#email").css("borderColor","red");
						return;
					}
					if(a.call_back == "ok"){
						window.location = "/hicode/index.html";
					}
				}
				
			},"json");
			
		
		});
		
		
		//验证码方法
		 function getCode() {
			$.post("/hicode/validateCode/getValidateCode.spc",function(code) {
			
				console.log(code);
				$("#dvrow_img").html("");
				
				for (var i=0;i<code.length;i++) {
					var img = document.createElement("img");
					$(img).attr("src", "/hicode/sysimg/code/" + code[i].vc_name);
					$(img).css("transform", "rotate(" + code[i].vc_deg + "deg)");
					$(img).attr("deg", code[i].vc_deg);
					$(img).attr("the_img", code[i].id);

					$(img).click(function() {
						 var hehe = $(this);
						 $("#hehe").html("    ");
						$.post("/hicode/validateCode/getCodeDeg.spc", {
							"the_img" : $(this).attr("the_img"),
							"deg" : $(this).attr("deg")
						}, function(b) {
							hehe.attr("deg", b);
							hehe.css("transform", "rotate(" + b + "deg)");
						}); 
					});
					$("#dvrow_img").append($(img));
				}
				
			},"json");
		} 
	
	
	
	});



</script>











</html>
